# theme
source=$HOME/.config/hypr/mocha.conf

# monitors
monitor=DP-3,3840x2160@144,0x0,1.5
monitor=DP-4,2560x1440@144,2560x0,1
monitor=,preferred,auto,auto

# programs
$terminal = ghostty
$fileManager = thunar
$menu = rofi -modi drun,run -show drun
$calc = rofi -show calc -no-show-match -no-sort -automatic-save-to-history -lines 0 -calc-command "echo -n '{result}' | wl-copy"
$emoji = rofi -show emoji -kb-accept-entry "" -kb-custom-1 Return
$clipboard = cliphist list | rofi -dmenu -display-columns 2 | cliphist decode | wl-copy

# startup
exec-once = resetxdgportal
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = easyeffects --gapplication-service
exec = gsettings set org.gnome.desktop.interface gtk-theme "adw-gtk3-dark"
exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = wl-clip-persist --clipboard regular
exec-once = systemctl --user start hyprpolkitagent
exec-once = 1password --silent
exec-once = thunar --daemon
exec-once = wlsunset -l -33.9 -L 151.2
exec-once = qs & hyprpaper & swaync & hypridle
exec-once = [workspace 1 silent] $terminal
exec-once = [workspace 1 silent] sleep 5; zen-browser
exec-once = [workspace 7 silent] sleep 10; discord & spotify-launcher

# env
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORMTHEME,qt6ct

# nvidia
env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# workspaces
workspace = 1, monitor:DP-3, default:true
workspace = 2, monitor:DP-3
workspace = 3, monitor:DP-3
workspace = 4, monitor:DP-3
workspace = 5, monitor:DP-3
workspace = 6, monitor:DP-3

workspace = 7, monitor:DP-4, default:true
workspace = 8, monitor:DP-4
workspace = 9, monitor:DP-4
workspace = 10, monitor:DP-4

# variables
input {
  repeat_rate = 50
  repeat_delay = 200
  follow_mouse = 2
  force_no_accel = true
  accel_profile = flat
  sensitivity = 0.0
  float_switch_override_focus = 0
}

cursor {
  no_hardware_cursors = 0
  default_monitor = DP-3
}

general {
  gaps_in = 0
  gaps_out = 0
  border_size = 2
  col.active_border = $blue
  col.inactive_border = $base
  resize_on_border = true
  allow_tearing = true
  layout = dwindle
}

decoration {
  rounding = 0
  active_opacity = 1.0
  inactive_opacity = 1.0
  shadow {
    enabled = false
  }
  blur {
    enabled = false
  }
}

debug {
  overlay = true
  disable_logs = false
}

animations {
  enabled = false
}

dwindle {
  pseudotile = false
  preserve_split = true
  smart_split = false
  smart_resizing = false
}

master {
  new_status = slave
  mfact = 0.50
  orientation = right
}

misc {
  vrr = 1
  vfr = true
  force_default_wallpaper = 0
  disable_hyprland_logo = true
  disable_splash_rendering = true
  middle_click_paste = false
}

xwayland {
  force_zero_scaling = true
}

# keybindings

$mainMod = SUPER

bind = $mainMod, return, exec, $terminal
bind = $mainMod, Q, killactive
bind = $mainMod, E, exec, $fileManager
bind = $mainMod SHIFT, Space, toggleFloating,
bind = $mainMod, F, fullscreen, 1
bind = $mainMod, D, exec, $menu
bind = $mainMod SHIFT, E, exec, $emoji
bind = $mainMod, C, exec, $calc
bind = $mainMod, P, pseudo,
bind = $mainMod, A, togglesplit,
bind = $mainMod ALT, L, exec, hyprlock
bind = $mainMod SHIFT, C, exec, hyprpicker -a
bind = $mainMod, V, exec, $clipboard

bindl = ,XF86AudioPlay, exec, playerctl -p spotify play-pause
bindl = ,XF86AudioNext, exec, playerctl -p spotify next
bindl = ,XF86AudioPrev, exec, playerctl -p spotify previous

bind = CTRL SHIFT, 4, exec, hyprshot -z -m region -o ~/Pictures

bind = $mainMod, left, movefocus, l
bind = $mainMod, down, movefocus, d
bind = $mainMod, up, movefocus, u
bind = $mainMod, right, movefocus, r
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r

bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, down, movewindow, d
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, right, movewindow, r

bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, j, movewindow, d
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, l, movewindow, r

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# resize
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

bind = $mainMod, R, submap, resize

submap = resize

binde = , left, resizeactive, -20 0
binde = , down, resizeactive, 0 20
binde = , up, resizeactive, 0 -20
binde = , right, resizeactive, 20 0

binde = , h, resizeactive, -20 0
binde = , j, resizeactive, 0 20
binde = , k, resizeactive, 0 -20
binde = , l, resizeactive, 20 0

bind = , escape, submap, reset
bind = $mainMod, R, submap, reset

submap = reset

# window rules
# suppress maximise reqs from apps
windowrule = suppress_event maximize, match:class .*

# fix drag issues with xwayland apps
windowrule = no_focus on, match:class ^$, match:title ^$, match:xwayland 1, match:float 1, match:fullscreen 0, match:pin 0

# xwaylandvideobridge for screensharing
windowrule = opacity 0.0 override, no_anim on, no_focus on, no_initial_focus on, max_size 1 1, no_blur on, match:class ^(xwaylandvideobridge)$

# keep steam in workspace 4
windowrule = stay_focused on, min_size 1 1, match:title ^()$, match:class ^(steam)$
windowrule = workspace 4 silent, match:class ^(steam)$

# make sure spotify and discord start in workspace 4
windowrule = workspace 7 silent, match:class ^(spotify)$
windowrule = workspace 7 silent, match:class ^(discord)$

# runelite fixes
windowrule = no_focus on, match:float 1, match:class net-runelite-client-RuneLite, match:title ^(win\d+)$
windowrule = no_initial_focus on, size 1277 717, match:class ^(net-runelite-client-RuneLite)$, match:title ^win(.*)$
windowrule = tile on, match:class net-runelite-client-RuneLite, match:title ^(RuneLite)$
windowrule = pseudo on, match:class ^(net-runelite-client-RuneLite)$, match:title ^(RuneLite)$

# float zoom 
windowrule = float on, match:class ^(zoom)$
windowrule = no_initial_focus on, match:float 1, match:class zoom
